<!DOCTYPE html>
<html>
	<head>
		<title>tel3 labs</title>
		<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
		<script src="assets/js/usuarios.js"></script>
		<script src="assets/js/libs/jquery.dynatable.js"></script>
		<link rel="stylesheet" type="text/css" href="assets/css/libs/jquery.dynatable.css">
		<link rel="stylesheet" type="text/css" href="assets/css/perfiles.css">

		<script src="assets/js/libs/bootstrap.js"></script>
		<link rel="stylesheet" type="text/css" href="assets/css/libs/bootstrap.css">
	</head>

	<body>

		<table id="my-ajax-table">
		  <thead>
		    <th>id</th>
		    <th>name</th>
		    <th>mail</th>
		  </thead>
		  <tbody></tbody>
		</table>

		<!-- ul id="perfiles"></ul -->
		<!-- Button trigger modal -->
		<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
		  Cargar usuario
		</button>

		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
		      </div>
		      <div class="modal-body">
		        <form id="formUser">
					<label for="name">name</label>
					<input type="text" name="name" id="name" />
					<br />
					<label for="mail">mail</label>
					<input type="text" name="mail" id="mail" />
					<br />
					<label for="id_perfil">id_perfil</label>
					<input type="text" name="id_perfil" id="id_perfil" />
				</form>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        <button id="save" type="button" class="btn btn-primary">Save changes</button>
		      </div>
		    </div>
		  </div>
		</div>

<script type="text/javascript">
	$('document').ready(function(){
		$('#formUser').on('submit', function(e){
			e.preventDefault();
			var form = $(this).serializeArray();

			$.ajax({
				url: '/usuarios',
				method: 'post',
				data: {data: form},
				success: function(response) {
					// appendProfile(response.message, nombre);
					console.log(response);
				},
				complete: function () {
					//hookActions();
				}
			});
			$('#myModal').modal('hide');
		});

		$('#save').on('click', function(){
			$('#formUser').trigger('submit');
		});
	});
</script>

	</body>
</html> 